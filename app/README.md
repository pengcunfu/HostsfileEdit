# Windows Hosts文件编辑工具

一个基于PySide6的Windows系统hosts文件可视化编辑工具，提供友好的图形界面来管理系统hosts文件。

## 功能特性

- 📋 **可视化列表显示** - 以表格形式显示当前hosts文件中的所有条目
- ➕ **添加新条目** - 支持添加新的IP地址和域名映射
- ✏️ **修改现有条目** - 可以编辑已存在的hosts条目
- 🗑️ **删除条目** - 安全删除不需要的hosts条目
- 💾 **自动保存** - 修改后自动保存到系统hosts文件
- 🔒 **权限检测** - 自动检测管理员权限并提示
- 📝 **双输入模式** - 支持单行输入和分别输入两种方式

## 系统要求

- Windows 7/8/10/11
- Python 3.7+
- PySide6

## 安装依赖

```bash
pip install PySide6
```

或者使用requirements.txt安装：

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 启动程序

**重要：必须以管理员身份运行**

```bash
# 右键点击命令提示符，选择"以管理员身份运行"
python main.py
```

或者：
- 右键点击 `main.py` 文件
- 选择"以管理员身份运行"

### 2. 主界面操作

- **查看条目**：程序启动后会自动加载并显示当前hosts文件中的所有条目
- **选择条目**：点击列表中的任意条目进行选择
- **添加条目**：点击"添加"按钮
- **修改条目**：选中条目后点击"修改"按钮
- **删除条目**：选中条目后点击"删除"按钮

### 3. 添加/修改条目

程序提供两种输入方式：

#### 单行输入模式
- 在文本框中输入：`IP地址 域名`
- 例如：`127.0.0.1 localhost`
- 例如：`192.168.1.100 myserver.local`

#### 分别输入模式
- IP地址和域名分别在不同的文本框中输入
- 更适合精确输入

### 4. 常用hosts条目示例

```
# 本地开发
127.0.0.1 localhost
127.0.0.1 dev.mysite.com

# 屏蔽广告
0.0.0.0 ads.example.com
0.0.0.0 tracker.example.com

# 内网服务器
192.168.1.100 fileserver
192.168.1.200 database
```

## 文件结构

```
PyHostFileEdit/
├── main.py          # 主程序文件（包含UI和逻辑）
├── requirements.txt # 依赖包列表
├── README.md        # 说明文档
└── __pycache__/     # Python缓存目录
```

## 技术实现

- **GUI框架**：PySide6
- **文件操作**：Python标准库
- **正则表达式**：用于解析hosts文件格式
- **权限管理**：检测和处理Windows文件权限
- **架构设计**：UI和逻辑代码完全集成在main.py中

## 注意事项

### ⚠️ 重要提醒

1. **管理员权限**：修改hosts文件需要管理员权限，请务必以管理员身份运行程序
2. **备份建议**：建议在使用前备份原始hosts文件（位于 `C:\Windows\System32\drivers\etc\hosts`）
3. **防病毒软件**：某些防病毒软件可能会阻止hosts文件修改，请临时关闭或添加例外
4. **DNS缓存**：修改hosts文件后，可能需要刷新DNS缓存才能生效

### 刷新DNS缓存

修改hosts文件后，建议执行以下命令刷新DNS缓存：

```bash
# 以管理员身份运行命令提示符，然后执行：
ipconfig /flushdns
```

## 故障排除

### 常见问题

1. **"没有权限读取/写入hosts文件"**
   - 解决方案：以管理员身份运行程序

2. **"找不到hosts文件"**
   - 检查路径：`C:\Windows\System32\drivers\etc\hosts`
   - 确保文件存在且未被移动

3. **修改后不生效**
   - 刷新DNS缓存：`ipconfig /flushdns`
   - 重启浏览器或应用程序

4. **程序无法启动**
   - 检查Python和PySide6是否正确安装
   - 确保所有依赖文件完整

## 开发信息

- **开发语言**：Python 3
- **GUI框架**：PySide6
- **兼容系统**：Windows 7/8/10/11
- **许可证**：MIT License

## 更新日志

### v2.0.0
- 迁移到PySide6框架
- UI代码完全集成到main.py中
- 移除独立的ui.py文件
- 优化代码结构和性能

### v1.0.0
- 初始版本发布
- 基本的hosts文件编辑功能
- 图形化用户界面
- 支持添加、修改、删除操作
- 双输入模式支持

---

**免责声明**：本工具仅用于合法的系统管理目的。用户应当遵守相关法律法规，不得将本工具用于任何非法用途。使用本工具所产生的任何后果由用户自行承担。